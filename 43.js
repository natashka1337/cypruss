//билет 43. атрибуты defer и async

// defer:

// Скрипты с атрибутом defer загружаются в фоновом режиме, пока браузер продолжает обрабатывать HTML.
// Они выполняются только после того, как DOM-дерево полностью построено, но до события DOMContentLoaded.
// Скрипты с defer выполняются в том порядке, в котором они указаны в HTML. Это значит, 
// что если один скрипт загружается быстрее другого, он все равно будет выполнен позже, если он идет после в коде.
// Пример: Если у тебя есть два скрипта, один большой и один маленький, оба будут загружаться одновременно, 
// но маленький выполнится только после того, как большой завершит выполнение.

// async:

// Скрипты с атрибутом async загружаются параллельно с обработкой HTML и выполняются сразу после загрузки,
//  не дожидаясь завершения обработки страницы.
// Они не ждут друг друга, и порядок их выполнения может быть произвольным. Это значит, что если один 
// скрипт загружается быстрее другого, он выполнится первым, независимо от порядка в HTML.
// Пример: Если у тебя есть два скрипта, один из которых загружается быстрее, он выполнится первым, даже если он идет вторым в коде.


document.getElementById('output').innerHTML += 
    '<p>defer: DOM готов, выполняется в порядке объявления</p>';
console.log('defer скрипт');// этот скрипт выполнится после полного построения DOM



try {
    document.getElementById('output').innerHTML += 
        '<p>async: выполнился когда загрузился</p>';
} catch(e) {
    console.log('async: DOM еще не готов');
}
console.log('async скрипт');// этот скрипт выполнится сразу после загрузки, независимо от состояния DOM


document.getElementById('output').innerHTML += 
    '<p>normal: выполнился сразу при встрече</p>';
console.log('normal script executed');// этот скрипт выполнится сразу при встрече в HTML

// <!DOCTYPE html>
// <html>
// <head>
//     <title>defer vs async</title>
//     <script src="script43.js" defer></script>
//     <script src="script43.js" async></script>
// </head>
// <body>
//     <h1>Проверка загрузки скриптов</h1>
//     <div id="output"></div>
//     <script src="script43.js"></script>
// </body>
// </html>